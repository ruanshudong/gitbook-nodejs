(function(e){function t(t){for(var a,n,i=t[0],l=t[1],c=t[2],d=0,h=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&h.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],a=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},r={sso:0},o=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([2,"chunk-vendors"]),s()})({0:function(e,t){},2:function(e,t,s){e.exports=s("30e4")},"30e4":function(e,t,s){"use strict";s.r(t);var a=s("a026"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_page",attrs:{id:"app"}},[s("el-container",[s("router-view",{staticStyle:{height:"100%",width:"100%",position:"relative"}})],1)],1)},o=[],n={name:"sso",data(){return{}},methods:{},created(){},mounted(){}},i=n,l=s("2877"),c=Object(l["a"])(i,r,o,!1,null,null,null),u=c.exports,d=s("8c4f"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("img",{staticClass:"logo",attrs:{src:"/static/images/logo_white.png"}}),s("el-card",{directives:[{name:"show",rawName:"v-show",value:1,expression:"1"}],staticClass:"box-card"},[s("h1",[e._v("登 录")]),s("el-form",{ref:"ruleFormLogin",attrs:{"label-width":"0",model:e.data,rules:e.rules}},[s("el-form-item",{attrs:{prop:"uid"}},[s("el-input",{attrs:{placeholder:"用户邮箱","prefix-icon":"el-icon-message"},model:{value:e.data.uid,callback:function(t){e.$set(e.data,"uid",t)},expression:"data.uid"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{placeholder:"输入密码","show-password":"","prefix-icon":"el-icon-key"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),s("el-form-item",{attrs:{required:""}},[s("div",{staticClass:"captcha_box"},[s("el-input",{attrs:{"prefix-icon":"el-icon-finished",type:"text",placeholder:e.$t("login.captcha"),required:"","required-tip":e.$t("login.captchaTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.data.captcha,callback:function(t){e.$set(e.data,"captcha",t)},expression:"data.captcha"}}),s("img",{staticClass:"captcha_code",attrs:{title:"点击刷新",src:e.captchaUrl},on:{click:e.reloadCaptcha}})],1)]),s("el-button",{staticClass:"btn_long",attrs:{type:"primary",size:"small",round:""},on:{click:e.login}},[e._v("登 录")]),s("div",{staticClass:"sub_menu"},[s("a",{staticStyle:{float:"right"},attrs:{size:"small",round:""},on:{click:e.forget_pass}},[e._v("找回密码")]),s("a",{attrs:{size:"small",round:""},on:{click:e.show_registry}},[e._v("注 册")])])],1)],1),s("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showRegistry,expression:"showRegistry"}],staticClass:"box-card"},[s("h1",[e._v("注 册")]),s("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.data,"label-position":"left",rules:e.rules}},[s("el-form-item",{attrs:{label:"邮箱",prop:"uid",required:""}},[s("el-input",{attrs:{placeholder:"请输入邮箱","prefix-icon":"el-icon-message"},model:{value:e.data.uid,callback:function(t){e.$set(e.data,"uid",t)},expression:"data.uid"}})],1),s("el-form-item",{attrs:{label:"设置密码",prop:"password"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-key",placeholder:"必须为6到16个字符","show-password":""},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),s("el-form-item",{attrs:{label:"重复密码",prop:"checkPass",required:""}},[s("el-input",{attrs:{"prefix-icon":"el-icon-key",placeholder:"请重复上面的密码","show-password":""},model:{value:e.data.checkPass,callback:function(t){e.$set(e.data,"checkPass",t)},expression:"data.checkPass"}})],1),s("el-button",{staticClass:"btn_long",attrs:{type:"primary",size:"small",round:""},on:{click:e.register}},[e._v("注 册")]),s("div",{staticClass:"sub_menu"},[s("a",{attrs:{size:"small",round:""},on:{click:e.show_login}},[e._v("返 回")])])],1)],1),s("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showForget,expression:"showForget"}],staticClass:"box-card"},[s("h1",[e._v("找回密码")]),s("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.data,"label-position":"left",rules:e.rules}},[s("el-form-item",{attrs:{label:"邮箱",prop:"uid",required:""}},[s("el-input",{attrs:{placeholder:"请输入注册邮箱","prefix-icon":"el-icon-message"},model:{value:e.data.uid,callback:function(t){e.$set(e.data,"uid",t)},expression:"data.uid"}})],1),s("el-button",{staticClass:"btn_long",attrs:{type:"primary",size:"small",round:""},on:{click:e.forget}},[e._v("提 交")]),s("div",{staticClass:"sub_menu"},[s("a",{attrs:{size:"small",round:""},on:{click:e.show_login}},[e._v("返 回")])])],1)],1),e._m(0)],1)},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"copyright"},[e._v(" Copyright©2012-2021 优品科技管理股份有限公司 400-603-1846 版权所有 "),s("a",{attrs:{href:"http://www.miitbeian.gov.cn",target:"_blank"}},[e._v("粤ICP备15103921号-3")])])}],f=s("58b7"),g=s.n(f),m={name:"Login",data(){var e=(e,t,s)=>{""===t?s(new Error("请再次输入密码")):t!==this.data.password?s(new Error("两次输入密码不一致!")):s()},t=(e,t,s)=>{const a=/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return s(new Error("请输入合法的邮箱地址"));setTimeout(()=>{a.test(t)?s():s(new Error("请输入正确的邮箱格式"))},100)};return{msg:"欢迎",activeName:"first",data:{uid:"",captcha:"",password:"",checkPass:""},captchaUrl:"/captcha?"+Math.random(),showLogin:1,showRegistry:0,showForget:0,rules:{uid:[{required:!0,message:"请输入邮箱",trigger:"blur"},{message:"请输入合法的邮箱地址",trigger:"blur"},{validator:t,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6到16个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符",trigger:"blur"}],checkPass:[{validator:e,trigger:"blur"}]}}},methods:{handleClick(e,t){console.log(e,t)},reloadCaptcha(){this.captchaUrl="/pages/sso/captcha?"+Math.random()},login:function(){this.$refs["ruleFormLogin"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/login",{uid:this.data.uid,password:g()(this.data.password),captcha:this.data.captcha}).then(e=>{window.location.href="/"}).catch(e=>{this.$message({message:e.err_msg,type:"warning"})})})},forget_pass:function(){this.showForget=1,this.showRegistry=0,this.showLogin=0},show_registry:function(){this.showForget=0,this.showRegistry=1,this.showLogin=0},show_login:function(){this.showForget=0,this.showRegistry=0,this.showLogin=1},forget:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/forget",{uid:this.data.uid}).then(e=>{this.$message({message:"恭喜你，找回密码邮件已经发送到邮箱，请重新设置密码后登陆",type:"success"})}).catch(e=>{this.$message({message:e,type:"error"})})})},register:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/register",{uid:this.data.uid,password:g()(this.data.password)}).then(e=>{this.$message({message:"恭喜你，验证邮件已经发送到邮箱，请激活后登录, 正在跳转到登录界面",type:"success"}),setTimeout(()=>{location.href="/"},3e3)}).catch(e=>{this.$message({message:e.err_msg,type:"error"})})})}},mounted(){this.reloadCaptcha()}},w=m,b=Object(l["a"])(w,h,p,!1,null,null,null),v=b.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("h1",[e._v("重置密码")]),s("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.data,"label-position":"left",rules:e.rules}},[s("el-form-item",{attrs:{label:"设置密码",prop:"password",required:""}},[s("el-input",{attrs:{placeholder:"长度在 6 到 16 个字符","show-password":""},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),s("el-form-item",{attrs:{label:"重复密码",prop:"checkPass",required:""}},[s("el-input",{attrs:{placeholder:"请重复输入密码","show-password":""},model:{value:e.data.checkPass,callback:function(t){e.$set(e.data,"checkPass",t)},expression:"data.checkPass"}})],1),s("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.resetPass}},[e._v("提 交")])],1)],1)],1)},x=[],_={name:"ResetPass",data(){var e=(e,t,s)=>{""===t?s(new Error("请再次输入密码")):t!==this.data.password?s(new Error("两次输入密码不一致!")):s()};return{data:{password:"",checkPass:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6到16个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符",trigger:"blur"}],checkPass:[{validator:e,trigger:"blur"}]}}},methods:{getQueryVariable(e){let t=location.href.indexOf("?");if(-1==t)return"";let s=location.href.substring(t+1),a=s.split("&");for(let r=0;r<a.length;r++){let t=a[r].split("=");if(t[0]==e)return t[1]}return""},resetPass:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;{const e=this.getQueryVariable("token");this.$ajax.postJSON("/sso/resetPass",{password:g()(this.data.password),token:e}).then(e=>{this.$message({message:"重置密码成功, 即将跳转登录",type:"success"}),setTimeout(()=>{location.href=e.href},1e3)}).catch(e=>{this.$message({message:"连接已经过期, 重置密码失败!",type:"warning"})})}})}}},k=_,P=Object(l["a"])(k,y,x,!1,null,null,null),$=P.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("h1",[e._v("修改密码")]),s("el-form",{ref:"ruleForm",attrs:{"label-width":"150px",model:e.data,"label-position":"left",rules:e.rules}},[s("el-form-item",{attrs:{label:"请输入旧密码",prop:"newPassword",required:""}},[s("el-input",{attrs:{placeholder:"长度在 6 到 16 个字符","show-password":""},model:{value:e.data.oldPassword,callback:function(t){e.$set(e.data,"oldPassword",t)},expression:"data.oldPassword"}})],1),s("el-form-item",{attrs:{label:"请输入新密码",prop:"oldPassword",required:""}},[s("el-input",{attrs:{placeholder:"长度在 6 到 16 个字符","show-password":""},model:{value:e.data.newPassword,callback:function(t){e.$set(e.data,"newPassword",t)},expression:"data.newPassword"}})],1),s("el-form-item",{attrs:{label:"重复输入新密码",prop:"checkPass",required:""}},[s("el-input",{attrs:{placeholder:"请重复输入密码","show-password":""},model:{value:e.data.checkPass,callback:function(t){e.$set(e.data,"checkPass",t)},expression:"data.checkPass"}})],1),s("el-button",{staticClass:"btn_long",attrs:{type:"primary",size:"small",round:""},on:{click:e.modifyPass}},[e._v("修 改")]),s("div",{staticClass:"sub_menu"},[s("a",{attrs:{size:"small",round:""},on:{click:e.showIndex}},[e._v("返 回")])])],1)],1)],1)},j=[],C={name:"ModifyPass",data(){var e=(e,t,s)=>{""===t?s(new Error("请再次输入密码")):t!==this.data.newPassword?s(new Error("两次输入密码不一致!")):s()};return{data:{newPassword:"",oldPassword:"",checkPass:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6到16个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符",trigger:"blur"}],checkPass:[{validator:e,trigger:"blur"}]}}},methods:{showIndex:function(){location.href="/"},modifyPass:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/modifyPass",{oldPassword:g()(this.data.oldPassword),newPassword:g()(this.data.newPassword)}).then(e=>{this.$message({message:"修改密码成功, 即将跳转登录",type:"success"}),setTimeout(()=>{location.href="/"},1e3)}).catch(e=>{this.$message({message:e.err_msg,type:"error"})})})}}},S=C,E=(s("8b02"),Object(l["a"])(S,O,j,!1,null,"7377732c",null)),q=E.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("h1",[e._v("正在激活用户, 请稍后...")])])],1)},T=[],F={name:"Activated",data(){return{}},mounted(){this.activated()},methods:{getQueryVariable(e){let t=location.href.indexOf("?");if(-1==t)return"";let s=location.href.substring(t+1),a=s.split("&");for(let r=0;r<a.length;r++){let t=a[r].split("=");if(t[0]==e)return t[1]}return""},activated:function(){const e=this.getQueryVariable("token");this.$ajax.postJSON("/sso/activated",{token:e}).then(e=>{this.$message({message:"激活成功, 即将跳转登录",type:"success"}),setTimeout(()=>{location.href=e.href},1e3)}).catch(e=>{this.$message({message:"激活失败, 请检查连接的合法性!",type:"warning"})})}}},J=F,z=Object(l["a"])(J,N,T,!1,null,null,null),R=z.exports;const L=d["a"].prototype.push;d["a"].prototype.push=function(e){return L.call(this,e).catch(e=>e)},a["default"].use(d["a"]);var M=new d["a"]({routes:[{path:"/login",name:"Login",component:v},{path:"/resetPass",name:"ResetPass",component:$},{path:"/modifyPass",name:"ModifyPass",component:q},{path:"/activated",name:"Activated",component:R},{path:"*",redirect:"/login"}],scrollBehavior(e,t,s){return{x:0,y:0}}}),A=s("5c96"),U=s.n(A),H=(s("0fae"),s("b3f5"),s("28dd")),I=s("f51c");s("6672");a["default"].config.productionTip=!1,a["default"].use(H["a"]),I["b"].call(void 0).then(()=>{a["default"].use(U.a,{i18n:(e,t)=>I["a"].t(e,t)}),new a["default"]({i18n:I["a"],el:"#app",router:M,components:{Sso:u},template:"<Sso/>"})})},6672:function(e,t,s){},"758d":function(e,t,s){},"7ad2":function(e,t,s){"use strict";const a=e=>"string"===typeof e,r=Array.isArray,o=e=>"object"===typeof e&&null!==e,n=e=>"function"===typeof e,i=Object.assign;function l(e){return String(e).replace(/[^!'()~*\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]/gu,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~*]/g,e=>"%"+e.charCodeAt().toString(16).slice(-2).toUpperCase())}function c(e){if(!e)return"";const t=[];return Object.keys(e).forEach(s=>{let a=e[s];null!==a&&void 0!==a||(a=""),t.push(`${l(s)}=${l(a)}`)}),t.join("&").replace(/%20/g,"+")}function u(e){const t=(e,s,a)=>r(a)||o(a)?(Object.keys(a).forEach(r=>{t(e,`${s}[${r}]`,a[r])}),e):(e[s]=a,e);return c(Object.keys(e).reduce((s,a)=>t(s,a,e[a]),{}))}class d{constructor(e){this.defaults=e}get(e){return i({},this.defaults,e)}set(e,t){if(e){if(a(e)){const s=e.split(".");s.reduce((e,a,r)=>(r===s.length-1&&(e[a]=t),e[a]),this.defaults)}o(e)&&Object.keys(e).forEach(t=>{this.set(t,e[t])}),r(e)&&e.forEach(e=>this.set(e,t))}}remove(e){if(e){if(a(e)){const t=e.split(".");t.reduce((e,s,a)=>(a===t.length-1&&delete e[s],e[s]),this.defaults)}r(e)&&e.forEach(e=>this.remove(e))}}}class h{constructor(e){this.handler=e}set(e){n(e)&&(this.handler=e)}exec(){n(this.handler)&&this.handler.apply(null,arguments)}}class p{constructor(e){this.base=e||""}set(e){a(e)&&(this.base=e)}get(e){return this.base+(e||"")}}const f=new p,g=new d({credentials:"same-origin",timeout:5e3}),m=new d({"X-Requested-With":"XMLHttpRequest"}),w=new d({}),b=new h,v=new h(()=>!0);function y(e,t){let s=c(w.get(t));return s&&(s=-1===e.indexOf("?")?"?"+s:"&"+s),e+s}function x(e){const t=e.status;if(t>=200&&t<300||304===t)return e;throw b.exec(t,e),new Error(e.statusText)}function _(e){return e.json().then(null,t=>(b.exec(500,e),Promise.reject(t)))}function k(e){return v.handler(e)?e:Promise.reject(e)}function P(e){return Promise.reject(e)}function $(e,t){const s=g.get({headers:m.get()});return fetch(f.get(y(e,t)),s).then(x).then(_).catch(P)}function O(e,t){const s=g.get({headers:m.get()});return fetch(f.get(y(e,t)),s).then(x).then(_).then(k).catch(P)}function j(e,t){const s=g.get({method:"POST",headers:m.get({"Content-Type":"application/x-www-form-urlencoded"}),body:u(w.get(t))});return fetch(f.get(e),s).then(x).then(_).then(k).catch(P)}function C(e,t){const s=g.get({method:"POST",headers:m.get(),body:t}),a=w.get({});return Object.keys(a).forEach(e=>{t.append(e,a[e])}),fetch(f.get(e),s).then(x).then(_).then(k).catch(P)}function S(e,t){const s=g.get({method:"POST",headers:m.get({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(w.get(t))});return fetch(f.get(e),s).then(x).then(_).then(k).catch(P)}function E(e,t){const s=g.get({method:"PUT",headers:m.get({"Content-Type":"application/x-www-form-urlencoded"}),body:u(w.get(t))});return fetch(f.get(e),s).then(x).then(_).then(k).catch(P)}function q(e,t){const s=g.get({method:"DELETE",headers:m.get()});return fetch(f.get(y(e,t)),s).then(x).then(_).then(k).catch(P)}function N(e,t){window.open(f.get(y(e,t)))}t["a"]={ServerUrl:f,Options:g,Headers:m,Body:w,StatusHandler:b,ResultHandler:v,get:$,getJSON:O,post:j,postForm:C,postJSON:S,put:E,remove:q,download:N}},"8b02":function(e,t,s){"use strict";s("758d")},b3f5:function(e,t,s){"use strict";s("6d93");var a=s("a026"),r=s("7ad2");r["a"].ServerUrl.set("/pages"),r["a"].ResultHandler.set(e=>!(!e||200!==e.ret_code||null==e.data)),["getJSON","postJSON"].forEach(e=>{const t=r["a"][e];r["a"]["_"+e]=t,r["a"][e]=(...e)=>t.call(null,...e).then(e=>e.data)}),Object.defineProperty(a["default"].prototype,"$ajax",{get(){return r["a"]}});r["a"]},f51c:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}));var a=s("a026"),r=s("a925"),o=s("00e7"),n=s.n(o),i=s("7ad2");a["default"].use(r["a"]),a["default"].use(n.a);const l=new r["a"]({});var c=[];function u(){return new Promise((e,t)=>{i["a"].getJSON("/api/get_locale").then(t=>{let s=n.a.get("locale");if("[object Object]"==Object.prototype.toString.call(t)){for(var a in t)l.setLocaleMessage(a,t[a]),c.push({localeCode:a,localeName:t[a]["localeName"],localeMessages:t});s=t[s]?s:"cn",c=t}l.locale=s,e()}).catch(e=>{t(e)})})}}});