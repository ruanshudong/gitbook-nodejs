(function(e){function t(t){for(var r,n,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&h.push(s[n][0]),s[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={sso:0},o=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([2,"chunk-vendors"]),a()})({0:function(e,t){},2:function(e,t,a){e.exports=a("30e4")},"24df":function(e,t,a){},"284e":function(e,t,a){"use strict";a("5ade")},"30e4":function(e,t,a){"use strict";a.r(t);var r=a("a026"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("router-view",{staticStyle:{height:"100%"}})],1)],1)},o=[],n={name:"sso",data(){return{}},methods:{},created(){},mounted(){}},i=n,c=a("2877"),l=Object(c["a"])(i,s,o,!1,null,null,null),u=l.exports,d=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],staticClass:"box-card"},[a("h1",[e._v(e._s(e.msg)+"登录优品文档")]),a("el-form",{ref:"ruleFormLogin",attrs:{"label-width":"0",model:e.data,rules:e.rules}},[a("el-form-item",{attrs:{prop:"uid"}},[a("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-user"},model:{value:e.data.uid,callback:function(t){e.$set(e.data,"uid",t)},expression:"data.uid"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","show-password":"","prefix-icon":"el-icon-key"},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),a("el-form-item",{attrs:{required:""}},[a("div",{staticClass:"captcha_box"},[a("el-input",{attrs:{type:"text",placeholder:e.$t("login.captcha"),required:"","required-tip":e.$t("login.captchaTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.data.captcha,callback:function(t){e.$set(e.data,"captcha",t)},expression:"data.captcha"}}),a("img",{staticClass:"captcha_code",attrs:{title:"点击刷新",src:e.captchaUrl},on:{click:e.reloadCaptcha}})],1)]),a("el-button",{attrs:{size:"small",round:""},on:{click:e.show_registry}},[e._v("注 册")]),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.login}},[e._v("登 录")]),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",round:""},on:{click:e.forget_pass}},[e._v("找回密码")])],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showRegistry,expression:"showRegistry"}],staticClass:"box-card"},[a("h1",[e._v(e._s(e.msg)+"注册为新用户")]),a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.data,"label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"邮箱",prop:"uid",required:""}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.data.uid,callback:function(t){e.$set(e.data,"uid",t)},expression:"data.uid"}})],1),a("el-form-item",{attrs:{label:"设置密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"长度在 6 到 16 个字符","show-password":""},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),a("el-form-item",{attrs:{label:"重复密码",prop:"checkPass"}},[a("el-input",{attrs:{placeholder:"请重复输入密码","show-password":""},model:{value:e.data.checkPass,callback:function(t){e.$set(e.data,"checkPass",t)},expression:"data.checkPass"}})],1),a("el-button",{attrs:{size:"small",round:""},on:{click:e.show_login}},[e._v("返 回")]),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.register}},[e._v("提 交")])],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showForget,expression:"showForget"}],staticClass:"box-card"},[a("h1",[e._v("找回密码")]),a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.data,"label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"邮箱",prop:"uid",required:""}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.data.uid,callback:function(t){e.$set(e.data,"uid",t)},expression:"data.uid"}})],1),a("el-button",{attrs:{size:"small",round:""},on:{click:e.show_login}},[e._v("返 回")]),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.forget}},[e._v("提 交")])],1)],1)],1)},p=[],f=a("58b7"),g=a.n(f),m={name:"Login",data(){var e=(e,t,a)=>{""===t?a(new Error("请再次输入密码")):t!==this.data.password?a(new Error("两次输入密码不一致!")):a()},t=(e,t,a)=>{const r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return a(new Error("请输入合法的邮箱地址"));setTimeout(()=>{r.test(t)?a():a(new Error("请输入正确的邮箱格式"))},100)};return{msg:"欢迎",data:{uid:"",captcha:"",password:"",checkPass:""},captchaUrl:"/captcha?"+Math.random(),showLogin:1,showRegistry:0,showForget:0,rules:{uid:[{required:!0,message:"请输入邮箱",trigger:"blur"},{message:"请输入合法的邮箱地址",trigger:"blur"},{validator:t,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6到16个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符",trigger:"blur"}],checkPass:[{validator:e,trigger:"blur"}]}}},methods:{reloadCaptcha(){this.captchaUrl="/pages/sso/captcha?"+Math.random()},login:function(){this.$refs["ruleFormLogin"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/login",{uid:this.data.uid,password:g()(this.data.password),captcha:this.data.captcha}).then(e=>{window.location.href="/"}).catch(e=>{this.$message({message:e.err_msg,type:"warning"})})})},forget_pass:function(){this.showForget=1,this.showRegistry=0,this.showLogin=0},show_registry:function(){this.showForget=0,this.showRegistry=1,this.showLogin=0},show_login:function(){this.showForget=0,this.showRegistry=0,this.showLogin=1},forget:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/forget",{uid:this.data.uid}).then(e=>{this.$message({message:"恭喜你，找回密码邮件已经发送到邮箱，请重新设置密码后登陆",type:"success"})}).catch(e=>{this.$message({message:e,type:"error"})})})},register:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;this.$ajax.postJSON("/sso/register",{uid:this.data.uid,password:g()(this.data.password)}).then(e=>{this.$message({message:"恭喜你，验证邮件已经发送到邮箱，请激活后登录",type:"success"})}).catch(e=>{this.$message({message:e.err_msg,type:"error"})})})}},mounted(){this.reloadCaptcha()}},w=m,b=(a("284e"),Object(c["a"])(w,h,p,!1,null,"1b140972",null)),v=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("h1",[e._v("重置密码")]),a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.data,"label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"设置密码",prop:"password",required:""}},[a("el-input",{attrs:{placeholder:"长度在 6 到 16 个字符","show-password":""},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}})],1),a("el-form-item",{attrs:{label:"重复密码",prop:"checkPass",required:""}},[a("el-input",{attrs:{placeholder:"请重复输入密码","show-password":""},model:{value:e.data.checkPass,callback:function(t){e.$set(e.data,"checkPass",t)},expression:"data.checkPass"}})],1),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.resetPass}},[e._v("提 交")])],1)],1)],1)},x=[],k={name:"ResetPass",data(){var e=(e,t,a)=>{""===t?a(new Error("请再次输入密码")):t!==this.data.password?a(new Error("两次输入密码不一致!")):a()};return{data:{password:"",checkPass:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6到16个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符",trigger:"blur"}],checkPass:[{validator:e,trigger:"blur"}]}}},methods:{getQueryVariable(e){let t=location.href.indexOf("?");if(-1==t)return"";let a=location.href.substring(t+1),r=a.split("&");for(let s=0;s<r.length;s++){let t=r[s].split("=");if(t[0]==e)return t[1]}return""},resetPass:function(){this.$refs["ruleForm"].validate(e=>{if(!e)return!1;{const e=this.getQueryVariable("token");this.$ajax.postJSON("/sso/resetPass",{password:g()(this.data.password),token:e}).then(e=>{this.$message({message:"重置密码成功, 即将跳转登录",type:"success"}),setTimeout(()=>{location.href=e.href},1e3)}).catch(e=>{this.$message({message:"连接已经过期, 重置密码失败!",type:"warning"})})}})}}},_=k,O=(a("45e9"),Object(c["a"])(_,y,x,!1,null,"7073c30f",null)),$=O.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("h1",[e._v("正在激活用户, 请稍后...")])])],1)},P=[],S={name:"Activated",data(){return{}},mounted(){this.activated()},methods:{getQueryVariable(e){let t=location.href.indexOf("?");if(-1==t)return"";let a=location.href.substring(t+1),r=a.split("&");for(let s=0;s<r.length;s++){let t=r[s].split("=");if(t[0]==e)return t[1]}return""},activated:function(){const e=this.getQueryVariable("token");this.$ajax.postJSON("/sso/activated",{token:e}).then(e=>{this.$message({message:"激活成功, 即将跳转登录",type:"success"}),setTimeout(()=>{location.href=e.href},1e3)}).catch(e=>{this.$message({message:"激活失败, 请检查连接的合法性!",type:"warning"})})}}},E=S,C=(a("dd2c"),Object(c["a"])(E,j,P,!1,null,"6b1867f5",null)),N=C.exports;const T=d["a"].prototype.push;d["a"].prototype.push=function(e){return T.call(this,e).catch(e=>e)},r["default"].use(d["a"]);var F=new d["a"]({routes:[{path:"/login",name:"Login",component:v},{path:"/resetPass",name:"ResetPass",component:$},{path:"/activated",name:"Activated",component:N},{path:"*",redirect:"/login"}],scrollBehavior(e,t,a){return{x:0,y:0}}}),q=a("5c96"),J=a.n(q),L=(a("0fae"),a("b3f5"),a("28dd")),R=a("f51c");r["default"].config.productionTip=!1,r["default"].use(L["a"]),R["b"].call(void 0).then(()=>{r["default"].use(J.a,{i18n:(e,t)=>R["a"].t(e,t)}),new r["default"]({i18n:R["a"],el:"#app",router:F,components:{Sso:u},template:"<Sso/>"})})},"45e9":function(e,t,a){"use strict";a("24df")},"5ade":function(e,t,a){},"5e8a":function(e,t,a){},"7ad2":function(e,t,a){"use strict";const r=e=>"string"===typeof e,s=Array.isArray,o=e=>"object"===typeof e&&null!==e,n=e=>"function"===typeof e,i=Object.assign;function c(e){return String(e).replace(/[^!'()~*\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]/gu,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~*]/g,e=>"%"+e.charCodeAt().toString(16).slice(-2).toUpperCase())}function l(e){if(!e)return"";const t=[];return Object.keys(e).forEach(a=>{let r=e[a];null!==r&&void 0!==r||(r=""),t.push(`${c(a)}=${c(r)}`)}),t.join("&").replace(/%20/g,"+")}function u(e){const t=(e,a,r)=>s(r)||o(r)?(Object.keys(r).forEach(s=>{t(e,`${a}[${s}]`,r[s])}),e):(e[a]=r,e);return l(Object.keys(e).reduce((a,r)=>t(a,r,e[r]),{}))}class d{constructor(e){this.defaults=e}get(e){return i({},this.defaults,e)}set(e,t){if(e){if(r(e)){const a=e.split(".");a.reduce((e,r,s)=>(s===a.length-1&&(e[r]=t),e[r]),this.defaults)}o(e)&&Object.keys(e).forEach(t=>{this.set(t,e[t])}),s(e)&&e.forEach(e=>this.set(e,t))}}remove(e){if(e){if(r(e)){const t=e.split(".");t.reduce((e,a,r)=>(r===t.length-1&&delete e[a],e[a]),this.defaults)}s(e)&&e.forEach(e=>this.remove(e))}}}class h{constructor(e){this.handler=e}set(e){n(e)&&(this.handler=e)}exec(){n(this.handler)&&this.handler.apply(null,arguments)}}class p{constructor(e){this.base=e||""}set(e){r(e)&&(this.base=e)}get(e){return this.base+(e||"")}}const f=new p,g=new d({credentials:"same-origin",timeout:5e3}),m=new d({"X-Requested-With":"XMLHttpRequest"}),w=new d({}),b=new h,v=new h(()=>!0);function y(e,t){let a=l(w.get(t));return a&&(a=-1===e.indexOf("?")?"?"+a:"&"+a),e+a}function x(e){const t=e.status;if(t>=200&&t<300||304===t)return e;throw b.exec(t,e),new Error(e.statusText)}function k(e){return e.json().then(null,t=>(b.exec(500,e),Promise.reject(t)))}function _(e){return v.handler(e)?e:Promise.reject(e)}function O(e){return Promise.reject(e)}function $(e,t){const a=g.get({headers:m.get()});return fetch(f.get(y(e,t)),a).then(x).then(k).catch(O)}function j(e,t){const a=g.get({headers:m.get()});return fetch(f.get(y(e,t)),a).then(x).then(k).then(_).catch(O)}function P(e,t){const a=g.get({method:"POST",headers:m.get({"Content-Type":"application/x-www-form-urlencoded"}),body:u(w.get(t))});return fetch(f.get(e),a).then(x).then(k).then(_).catch(O)}function S(e,t){const a=g.get({method:"POST",headers:m.get(),body:t}),r=w.get({});return Object.keys(r).forEach(e=>{t.append(e,r[e])}),fetch(f.get(e),a).then(x).then(k).then(_).catch(O)}function E(e,t){const a=g.get({method:"POST",headers:m.get({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(w.get(t))});return fetch(f.get(e),a).then(x).then(k).then(_).catch(O)}function C(e,t){const a=g.get({method:"PUT",headers:m.get({"Content-Type":"application/x-www-form-urlencoded"}),body:u(w.get(t))});return fetch(f.get(e),a).then(x).then(k).then(_).catch(O)}function N(e,t){const a=g.get({method:"DELETE",headers:m.get()});return fetch(f.get(y(e,t)),a).then(x).then(k).then(_).catch(O)}function T(e,t){window.open(f.get(y(e,t)))}t["a"]={ServerUrl:f,Options:g,Headers:m,Body:w,StatusHandler:b,ResultHandler:v,get:$,getJSON:j,post:P,postForm:S,postJSON:E,put:C,remove:N,download:T}},b3f5:function(e,t,a){"use strict";a("6d93");var r=a("a026"),s=a("7ad2");s["a"].ServerUrl.set("/pages"),s["a"].ResultHandler.set(e=>!(!e||200!==e.ret_code||null==e.data)),["getJSON","postJSON"].forEach(e=>{const t=s["a"][e];s["a"]["_"+e]=t,s["a"][e]=(...e)=>t.call(null,...e).then(e=>e.data)}),Object.defineProperty(r["default"].prototype,"$ajax",{get(){return s["a"]}});s["a"]},dd2c:function(e,t,a){"use strict";a("5e8a")},f51c:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u}));var r=a("a026"),s=a("a925"),o=a("00e7"),n=a.n(o),i=a("7ad2");r["default"].use(s["a"]),r["default"].use(n.a);const c=new s["a"]({});var l=[];function u(){return new Promise((e,t)=>{i["a"].getJSON("/api/get_locale").then(t=>{let a=n.a.get("locale");if("[object Object]"==Object.prototype.toString.call(t)){for(var r in t)c.setLocaleMessage(r,t[r]),l.push({localeCode:r,localeName:t[r]["localeName"],localeMessages:t});a=t[a]?a:"cn",l=t}c.locale=a,e()}).catch(e=>{t(e)})})}}});